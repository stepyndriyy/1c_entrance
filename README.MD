# Промежуточные идеи и рассуждения
Изначально у меня было несколько идей, рассмотрим наиболее эффективные из них:
* Вероятностный алгоритм:
        Моделируем игру большое количество раз, в каждой игре делаем определенное фиксированное количество ходов: если по истечении этих ходов игра не заканчивается, на этой итерации ответ NO, иначе YES. Наиболее частый исход пишем в ответ. Безусловно в первоначальном виде такой алгоритм выглядит "голым" и не очень-то рабочим, однако мне на ум пришло несколько эвристик. Первая из которых говорит о том, что если на столе осталось две "колоды" (здесь и далее кучки карт будем называть колодами), то игру можно закончить за конечное количество ходов (по крайней мере контрпримерв найдено не было) и позицию считаем выигранной. Вторая эвристика - перекладывать карты не по одной, а стопками, ее мы будем использовать и в основном алгоритме.
* Игра с помощью бота с оценкой позиции (идея будет подробно раскрыта в следующем параграфе)

# Основная идея
В ходе разработки алгоритма я пытался достигнуть максимальной точности ответа, поэтому вместо использования всякого рода вероятностных алгоритмов, было решено моделировать игру "искуственным интеллектом" - алгоритмом-ботом, который будет делать ходы, исходя из эвристической функции, определяющей релевантность хода.

# Оценка позиции
Позицию в игре будем оценивать исходя из количества "убывающих cтопок". Убывающая стопка (по умолчанию - просто стопка) - это несколько подряд идущих карт в колоде, образующих убывающую последовательность (если смотреть на них сверху вниз) - пример: король, дама, валет. Будем считать, что одна позиция лучше другой, если количество стопок в одной позиции меньше чем в другой, соотвественно результатом функции оценки позиции будет число тем больше, чем меньше в ней стопок - действительно, в позиции, соотвествующей концу игры стопок минимальное количество - 0. На первый взгляд может показаться, что в позиции, где все карты расположены хаотично (почти без убывающих последовательностей) количество стопок будет тоже сильно маленьким - отчасти это правда, но для этого была придумана еще одна эвристика, которая определяет вес стопки - количество карт, которое в нее входит: чем больше объемных стопок - тем мы ближе к финишу игры.
К сожалению, из-за ограничения по времени последнюю эвристику реализовать не удалось, хотя она могла бы повысить точность алгоритма.

# Бот
Бот представляет собой класс, реализующий игру, последовательно делая ходы. Игра продолжается до тех пор, пока в колодах остались карты, либо пока не настанет 1000-й ход (также вариативно) - в этом случае игра считается проигранной. Определенный ход бот делает только в том случае, если рекурсивное выполнение фиксированного количества ходов (количество ходов определяется переданным в play параметром depth) приводит к наиболее выгодной позиции (выгодность позиции определяется вышеописанной функцией).

# Кратко про реалицацию
Несмотря на то, что времени было не так много, я старался сделать свой код как можно более грамотным - отдельные сущности выделял в классы, старался делать их независимыми друг от друга - каждый реализует свои функции и не знает о других. Досадно, что из-за нехватки времени класс CardStack получился перенагруженным, по идее он не должен знать о нашей задаче и о других колодах, и тем более двигать в них какие-то карты. Хорошим решением здесь была бы реализация класса-хендлера, который бы управлял колодами, либо же за это должен был отвечать класс Solitaire.

# Заключение и выводы
Данный алгоритм позволяет с высокой точностью определить исход игры. Конечно, существует и другая идея, описанная в первом пункте - уверен, ее можно было бы неплохо развить, придумывая как можно больше эвристик, увеличивающих вероятноcть успешного завершения игры, если это возможно. Эта задача показалась мне очень интересной, рад был бы в будущем развить свою идею, а также изучить другие, придуманные не мной: не сомневаюсь, что на эту тему можно найти несколько интересных статей.
